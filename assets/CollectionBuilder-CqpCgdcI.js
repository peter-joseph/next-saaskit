import{r as h,R as c}from"./iframe-CU8xeqI0.js";import{b as P}from"./Hidden-BgCbMR3U.js";import{r as H}from"./index-DRLwkQ1N.js";import{c as K}from"./useFocusable-CobOxc2Q.js";import{p as D}from"./index--cEjw2F8.js";import{s as z}from"./index-C8NF5YMv.js";class b{get childNodes(){throw new Error("childNodes is not supported")}clone(){let e=new this.constructor(this.key);return e.value=this.value,e.level=this.level,e.hasChildNodes=this.hasChildNodes,e.rendered=this.rendered,e.textValue=this.textValue,e["aria-label"]=this["aria-label"],e.index=this.index,e.parentKey=this.parentKey,e.prevKey=this.prevKey,e.nextKey=this.nextKey,e.firstChildKey=this.firstChildKey,e.lastChildKey=this.lastChildKey,e.props=this.props,e.render=this.render,e.colSpan=this.colSpan,e.colIndex=this.colIndex,e}filter(e,t,n){let i=this.clone();return t.addDescendants(i,e),i}constructor(e){this.value=null,this.level=0,this.hasChildNodes=!1,this.rendered=null,this.textValue="",this["aria-label"]=void 0,this.index=0,this.parentKey=null,this.prevKey=null,this.nextKey=null,this.firstChildKey=null,this.lastChildKey=null,this.props={},this.colSpan=null,this.colIndex=null,this.type=this.constructor.type,this.key=e}}class N extends b{filter(e,t,n){let[i,l]=I(e,t,this.firstChildKey,n),r=this.clone();return r.firstChildKey=i,r.lastChildKey=l,r}}class A extends b{}A.type="header";class q extends b{}q.type="loader";class B extends N{filter(e,t,n){if(n(this.textValue,this)){let i=this.clone();return t.addDescendants(i,e),i}return null}}B.type="item";class F extends N{filter(e,t,n){let i=super.filter(e,t,n);if(i&&i.lastChildKey!==null){let l=e.getItem(i.lastChildKey);if(l&&l.type!=="header")return i}return null}}F.type="section";class U{get size(){return this.itemCount}getKeys(){return this.keyMap.keys()}*[Symbol.iterator](){let e=this.firstKey!=null?this.keyMap.get(this.firstKey):void 0;for(;e;)yield e,e=e.nextKey!=null?this.keyMap.get(e.nextKey):void 0}getChildren(e){let t=this.keyMap;return{*[Symbol.iterator](){let n=t.get(e),i=n?.firstChildKey!=null?t.get(n.firstChildKey):null;for(;i;)yield i,i=i.nextKey!=null?t.get(i.nextKey):void 0}}}getKeyBefore(e){let t=this.keyMap.get(e);if(!t)return null;if(t.prevKey!=null){for(t=this.keyMap.get(t.prevKey);t&&t.type!=="item"&&t.lastChildKey!=null;)t=this.keyMap.get(t.lastChildKey);var n;return(n=t?.key)!==null&&n!==void 0?n:null}return t.parentKey}getKeyAfter(e){let t=this.keyMap.get(e);if(!t)return null;if(t.type!=="item"&&t.firstChildKey!=null)return t.firstChildKey;for(;t;){if(t.nextKey!=null)return t.nextKey;if(t.parentKey!=null)t=this.keyMap.get(t.parentKey);else return null}return null}getFirstKey(){return this.firstKey}getLastKey(){let e=this.lastKey!=null?this.keyMap.get(this.lastKey):null;for(;e?.lastChildKey!=null;)e=this.keyMap.get(e.lastChildKey);var t;return(t=e?.key)!==null&&t!==void 0?t:null}getItem(e){var t;return(t=this.keyMap.get(e))!==null&&t!==void 0?t:null}at(){throw new Error("Not implemented")}clone(){let e=this.constructor,t=new e;return t.keyMap=new Map(this.keyMap),t.firstKey=this.firstKey,t.lastKey=this.lastKey,t.itemCount=this.itemCount,t}addNode(e){if(this.frozen)throw new Error("Cannot add a node to a frozen collection");e.type==="item"&&this.keyMap.get(e.key)==null&&this.itemCount++,this.keyMap.set(e.key,e)}addDescendants(e,t){this.addNode(e);let n=t.getChildren(e.key);for(let i of n)this.addDescendants(i,t)}removeNode(e){if(this.frozen)throw new Error("Cannot remove a node to a frozen collection");let t=this.keyMap.get(e);t!=null&&t.type==="item"&&this.itemCount--,this.keyMap.delete(e)}commit(e,t,n=!1){if(this.frozen)throw new Error("Cannot commit a frozen collection");this.firstKey=e,this.lastKey=t,this.frozen=!n}filter(e){let t=new this.constructor,[n,i]=I(this,t,this.firstKey,e);return t?.commit(n,i),t}constructor(){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.frozen=!1,this.itemCount=0}}function I(s,e,t,n){if(t==null)return[null,null];let i=null,l=null,r=s.getItem(t);for(;r!=null;){let u=r.filter(s,e,n);u!=null&&(u.nextKey=null,l&&(u.prevKey=l.key,l.nextKey=u.key),i==null&&(i=u),e.addNode(u),l=u),r=r.nextKey?s.getItem(r.nextKey):null}if(l&&l.type==="separator"){let u=l.prevKey;e.removeNode(l.key),u?(l=e.getItem(u),l.nextKey=null):l=null}var o,d;return[(o=i?.key)!==null&&o!==void 0?o:null,(d=l?.key)!==null&&d!==void 0?d:null]}class M{*[Symbol.iterator](){let e=this.firstChild;for(;e;)yield e,e=e.nextSibling}get firstChild(){return this._firstChild}set firstChild(e){this._firstChild=e,this.ownerDocument.markDirty(this)}get lastChild(){return this._lastChild}set lastChild(e){this._lastChild=e,this.ownerDocument.markDirty(this)}get previousSibling(){return this._previousSibling}set previousSibling(e){this._previousSibling=e,this.ownerDocument.markDirty(this)}get nextSibling(){return this._nextSibling}set nextSibling(e){this._nextSibling=e,this.ownerDocument.markDirty(this)}get parentNode(){return this._parentNode}set parentNode(e){this._parentNode=e,this.ownerDocument.markDirty(this)}get isConnected(){var e;return((e=this.parentNode)===null||e===void 0?void 0:e.isConnected)||!1}invalidateChildIndices(e){(this._minInvalidChildIndex==null||!this._minInvalidChildIndex.isConnected||e.index<this._minInvalidChildIndex.index)&&(this._minInvalidChildIndex=e,this.ownerDocument.markDirty(this))}updateChildIndices(){let e=this._minInvalidChildIndex;for(;e;)e.index=e.previousSibling?e.previousSibling.index+1:0,e=e.nextSibling;this._minInvalidChildIndex=null}appendChild(e){e.parentNode&&e.parentNode.removeChild(e),this.firstChild==null&&(this.firstChild=e),this.lastChild?(this.lastChild.nextSibling=e,e.index=this.lastChild.index+1,e.previousSibling=this.lastChild):(e.previousSibling=null,e.index=0),e.parentNode=this,e.nextSibling=null,this.lastChild=e,this.ownerDocument.markDirty(this),this.isConnected&&this.ownerDocument.queueUpdate()}insertBefore(e,t){if(t==null)return this.appendChild(e);e.parentNode&&e.parentNode.removeChild(e),e.nextSibling=t,e.previousSibling=t.previousSibling,e.index=t.index-1,this.firstChild===t?this.firstChild=e:t.previousSibling&&(t.previousSibling.nextSibling=e),t.previousSibling=e,e.parentNode=t.parentNode,this.invalidateChildIndices(e),this.isConnected&&this.ownerDocument.queueUpdate()}removeChild(e){e.parentNode===this&&(this._minInvalidChildIndex===e&&(this._minInvalidChildIndex=null),e.nextSibling&&(this.invalidateChildIndices(e.nextSibling),e.nextSibling.previousSibling=e.previousSibling),e.previousSibling&&(e.previousSibling.nextSibling=e.nextSibling),this.firstChild===e&&(this.firstChild=e.nextSibling),this.lastChild===e&&(this.lastChild=e.previousSibling),e.parentNode=null,e.nextSibling=null,e.previousSibling=null,e.index=0,this.ownerDocument.markDirty(e),this.isConnected&&this.ownerDocument.queueUpdate())}addEventListener(){}removeEventListener(){}get previousVisibleSibling(){let e=this.previousSibling;for(;e&&e.isHidden;)e=e.previousSibling;return e}get nextVisibleSibling(){let e=this.nextSibling;for(;e&&e.isHidden;)e=e.nextSibling;return e}get firstVisibleChild(){let e=this.firstChild;for(;e&&e.isHidden;)e=e.nextSibling;return e}get lastVisibleChild(){let e=this.lastChild;for(;e&&e.isHidden;)e=e.previousSibling;return e}constructor(e){this._firstChild=null,this._lastChild=null,this._previousSibling=null,this._nextSibling=null,this._parentNode=null,this._minInvalidChildIndex=null,this.ownerDocument=e}}class v extends M{get index(){return this._index}set index(e){this._index=e,this.ownerDocument.markDirty(this)}get level(){var e;return this.parentNode instanceof v?this.parentNode.level+(((e=this.node)===null||e===void 0?void 0:e.type)==="item"?1:0):0}getMutableNode(){return this.node==null?null:(this.isMutated||(this.node=this.node.clone(),this.isMutated=!0),this.ownerDocument.markDirty(this),this.node)}updateNode(){var e,t,n,i,l,r,o,d;let u=this.nextVisibleSibling,a=this.getMutableNode();if(a!=null){a.index=this.index,a.level=this.level;var f;a.parentKey=this.parentNode instanceof v&&(f=(e=this.parentNode.node)===null||e===void 0?void 0:e.key)!==null&&f!==void 0?f:null;var p;a.prevKey=(p=(n=this.previousVisibleSibling)===null||n===void 0||(t=n.node)===null||t===void 0?void 0:t.key)!==null&&p!==void 0?p:null;var x;a.nextKey=(x=u==null||(i=u.node)===null||i===void 0?void 0:i.key)!==null&&x!==void 0?x:null,a.hasChildNodes=!!this.firstChild;var m;a.firstChildKey=(m=(r=this.firstVisibleChild)===null||r===void 0||(l=r.node)===null||l===void 0?void 0:l.key)!==null&&m!==void 0?m:null;var C;if(a.lastChildKey=(C=(d=this.lastVisibleChild)===null||d===void 0||(o=d.node)===null||o===void 0?void 0:o.key)!==null&&C!==void 0?C:null,(a.colSpan!=null||a.colIndex!=null)&&u){var S,g;let k=((S=a.colIndex)!==null&&S!==void 0?S:a.index)+((g=a.colSpan)!==null&&g!==void 0?g:1);if(u.node!=null&&k!==u.node.colIndex){let _=u.getMutableNode();_.colIndex=k}}}}setProps(e,t,n,i,l){let r,{value:o,textValue:d,id:u,...a}=e;if(this.node==null?(r=new n(u??`react-aria-${++this.ownerDocument.nodeId}`),this.node=r):r=this.getMutableNode(),a.ref=t,r.props=a,r.rendered=i,r.render=l,r.value=o,e["aria-label"]&&(r["aria-label"]=e["aria-label"]),r.textValue=d||(typeof a.children=="string"?a.children:"")||e["aria-label"]||"",u!=null&&u!==r.key)throw new Error("Cannot change the id of an item");a.colSpan!=null&&(r.colSpan=a.colSpan),this.isConnected&&this.ownerDocument.queueUpdate()}get style(){let e=this;return{get display(){return e.isHidden?"none":""},set display(t){let n=t==="none";if(e.isHidden!==n){var i,l;(((i=e.parentNode)===null||i===void 0?void 0:i.firstVisibleChild)===e||((l=e.parentNode)===null||l===void 0?void 0:l.lastVisibleChild)===e)&&e.ownerDocument.markDirty(e.parentNode);let r=e.previousVisibleSibling,o=e.nextVisibleSibling;r&&e.ownerDocument.markDirty(r),o&&e.ownerDocument.markDirty(o),e.isHidden=n,e.ownerDocument.markDirty(e)}}}}hasAttribute(){}setAttribute(){}setAttributeNS(){}removeAttribute(){}constructor(e,t){super(t),this.nodeType=8,this.isMutated=!0,this._index=0,this.isHidden=!1,this.node=null}}class L extends M{get isConnected(){return!0}createElement(e){return new v(e,this)}getMutableCollection(){return this.nextCollection||(this.nextCollection=this.collection.clone()),this.nextCollection}markDirty(e){this.dirtyNodes.add(e)}addNode(e){if(e.isHidden||e.node==null)return;let t=this.getMutableCollection();if(!t.getItem(e.node.key))for(let n of e)this.addNode(n);t.addNode(e.node)}removeNode(e){for(let t of e)this.removeNode(t);e.node&&this.getMutableCollection().removeNode(e.node.key)}getCollection(){return this.inSubscription?this.collection.clone():(this.queuedRender=!1,this.updateCollection(),this.collection)}updateCollection(){for(let o of this.dirtyNodes)o instanceof v&&(!o.isConnected||o.isHidden)?this.removeNode(o):o.updateChildIndices();for(let o of this.dirtyNodes)o instanceof v?(o.isConnected&&!o.isHidden&&(o.updateNode(),this.addNode(o)),o.node&&this.dirtyNodes.delete(o),o.isMutated=!1):this.dirtyNodes.delete(o);if(this.nextCollection){var e,t,n,i,l,r;this.nextCollection.commit((l=(t=this.firstVisibleChild)===null||t===void 0||(e=t.node)===null||e===void 0?void 0:e.key)!==null&&l!==void 0?l:null,(r=(i=this.lastVisibleChild)===null||i===void 0||(n=i.node)===null||n===void 0?void 0:n.key)!==null&&r!==void 0?r:null,this.isSSR),this.isSSR||(this.collection=this.nextCollection,this.nextCollection=null)}}queueUpdate(){if(!(this.dirtyNodes.size===0||this.queuedRender)){this.queuedRender=!0,this.inSubscription=!0;for(let e of this.subscriptions)e();this.inSubscription=!1}}subscribe(e){return this.subscriptions.add(e),()=>this.subscriptions.delete(e)}resetAfterSSR(){this.isSSR&&(this.isSSR=!1,this.firstChild=null,this.lastChild=null,this.nodeId=0)}constructor(e){super(null),this.nodeType=11,this.ownerDocument=this,this.dirtyNodes=new Set,this.isSSR=!1,this.nodeId=0,this.nodesByProps=new WeakMap,this.nextCollection=null,this.subscriptions=new Set,this.queuedRender=!1,this.inSubscription=!1,this.collection=e,this.nextCollection=e}}function W(s){let{children:e,items:t,idScope:n,addIdAndValue:i,dependencies:l=[]}=s,r=h.useMemo(()=>new WeakMap,l);return h.useMemo(()=>{if(t&&typeof e=="function"){let u=[];for(let a of t){let f=r.get(a);if(!f){f=e(a);var o,d;let p=(d=(o=f.props.id)!==null&&o!==void 0?o:a.key)!==null&&d!==void 0?d:a.id;if(p==null)throw new Error("Could not determine key for item");n!=null&&(p=n+":"+p),f=h.cloneElement(f,i?{key:p,id:p,value:a}:{key:p}),r.set(a,f)}u.push(f)}return u}else if(typeof e!="function")return e},[e,t,r,n,i])}const E=h.createContext(!1),y=h.createContext(null);function ne(s){if(h.useContext(y))return s.content;let{collection:t,document:n}=O(s.createCollection);return c.createElement(c.Fragment,null,c.createElement(P,null,c.createElement(y.Provider,{value:n},s.content)),c.createElement(T,{render:s.children,collection:t}))}function T({collection:s,render:e}){return e(s)}function G(s,e,t){let n=D(),i=h.useRef(n);i.current=n;let l=h.useCallback(()=>i.current?t():e(),[e,t]);return z.useSyncExternalStore(s,l)}const J=typeof c.useSyncExternalStore=="function"?c.useSyncExternalStore:G;function O(s){let[e]=h.useState(()=>new L(s?.()||new U)),t=h.useCallback(r=>e.subscribe(r),[e]),n=h.useCallback(()=>{let r=e.getCollection();return e.isSSR&&e.resetAfterSSR(),r},[e]),i=h.useCallback(()=>(e.isSSR=!0,e.getCollection()),[e]);return{collection:J(t,n,i),document:e}}const $=h.createContext(null);function Q(s){var e;return e=class extends b{},e.type=s,e}function R(s,e,t,n,i,l){typeof s=="string"&&(s=Q(s));let r=h.useCallback(d=>{d?.setProps(e,t,s,n,l)},[e,t,n,l,s]),o=h.useContext($);if(o){let d=o.ownerDocument.nodesByProps.get(e);return d||(d=o.ownerDocument.createElement(s.type),d.setProps(e,t,s,n,l),o.appendChild(d),o.ownerDocument.updateCollection(),o.ownerDocument.nodesByProps.set(e,d)),i?c.createElement($.Provider,{value:d},i):null}return c.createElement(s.type,{ref:r},i)}function le(s,e){let t=({node:i})=>e(i.props,i.props.ref,i),n=h.forwardRef((i,l)=>{let r=h.useContext(K);if(!h.useContext(E)){if(e.length>=3)throw new Error(e.name+" cannot be rendered outside a collection.");return e(i,l)}return R(s,i,l,"children"in i?i.children:null,null,d=>c.createElement(K.Provider,{value:r},c.createElement(t,{node:d})))});return n.displayName=e.name,n}function se(s,e,t=V){let n=({node:l})=>e(l.props,l.props.ref,l),i=h.forwardRef((l,r)=>{let o=t(l);var d;return(d=R(s,l,r,null,o,u=>c.createElement(n,{node:u})))!==null&&d!==void 0?d:c.createElement(c.Fragment,null)});return i.displayName=e.name,i}function V(s){return W({...s,addIdAndValue:!0})}const w=h.createContext(null);function re(s){let e=h.useContext(w),t=(e?.dependencies||[]).concat(s.dependencies);var n;let i=(n=s.idScope)!==null&&n!==void 0?n:e?.idScope,l=V({...s,idScope:i,dependencies:t});return h.useContext(y)&&(l=c.createElement(X,null,l)),e=h.useMemo(()=>({dependencies:t,idScope:i}),[i,...t]),c.createElement(w.Provider,{value:e},l)}function X({children:s}){let e=h.useContext(y),t=h.useMemo(()=>c.createElement(y.Provider,{value:null},c.createElement(E.Provider,{value:!0},s)),[s]);return D()?c.createElement($.Provider,{value:e},t):H.createPortal(t,e)}export{ne as $,re as a,le as b,b as c,se as d,F as e,B as f,A as g,q as h,W as i,N as j,U as k};
