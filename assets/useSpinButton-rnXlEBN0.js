import{c as Ie}from"./NumberFormatter-ZLOyqEzC.js";import{a as Re,$ as Ae}from"./LiveAnnouncer-Cy654hVN.js";import{r as m}from"./iframe-CU8xeqI0.js";import{$ as Ve}from"./useFocusRing-DE7Uj8W9.js";import{a as g}from"./useKeyboard-GGR2NUhF.js";import{$ as Be}from"./useLocalizedStringFormatter-DkPuMiER.js";const Ce=new RegExp("^.*\\(.*\\).*$"),Le=["latn","arab","hanidec","deva","beng","fullwide"];class Me{parse(t){return k(this.locale,this.options,t).parse(t)}isValidPartialNumber(t,e,r){return k(this.locale,this.options,t).isValidPartialNumber(t,e,r)}getNumberingSystem(t){return k(this.locale,this.options,t).options.numberingSystem}constructor(t,e={}){this.locale=t,this.options=e}}const G=new Map;function k(s,t,e){let r=K(s,t);if(!s.includes("-nu-")&&!r.isValidPartialNumber(e)){for(let a of Le)if(a!==r.options.numberingSystem){let o=K(s+(s.includes("-u-")?"-nu-":"-u-nu-")+a,t);if(o.isValidPartialNumber(e))return o}}return r}function K(s,t){let e=s+(t?Object.entries(t).sort((a,o)=>a[0]<o[0]?-1:1).join():""),r=G.get(e);return r||(r=new ke(s,t),G.set(e,r)),r}class ke{parse(t){let e=this.sanitize(t);if(this.symbols.group&&(e=D(e,this.symbols.group,"")),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(e=e.replace(this.symbols.minusSign,"-")),e=e.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let p=e.indexOf("-");e=e.replace("-",""),e=e.replace("+","");let c=e.indexOf(".");c===-1&&(c=e.length),e=e.replace(".",""),c-2===0?e=`0.${e}`:c-2===-1?e=`0.0${e}`:c-2===-2?e="0.00":e=`${e.slice(0,c-2)}.${e.slice(c-2)}`,p>-1&&(e=`-${e}`)}let r=e?+e:NaN;if(isNaN(r))return NaN;if(this.options.style==="percent"){var a,o;let p={...this.options,style:"decimal",minimumFractionDigits:Math.min(((a=this.options.minimumFractionDigits)!==null&&a!==void 0?a:0)+2,20),maximumFractionDigits:Math.min(((o=this.options.maximumFractionDigits)!==null&&o!==void 0?o:0)+2,20)};return new Me(this.locale,p).parse(new Ie(this.locale,p).format(r))}return this.options.currencySign==="accounting"&&Ce.test(t)&&(r=-1*r),r}sanitize(t){return t=t.replace(this.symbols.literals,""),this.symbols.minusSign&&(t=t.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(t=t.replace(",",this.symbols.decimal),t=t.replace("،",this.symbols.decimal)),this.symbols.group&&(t=D(t,".",this.symbols.group))),this.symbols.group==="’"&&t.includes("'")&&(t=D(t,"'",this.symbols.group)),this.options.locale==="fr-FR"&&this.symbols.group&&(t=D(t," ",this.symbols.group),t=D(t,/\u00A0/g,this.symbols.group)),t}isValidPartialNumber(t,e=-1/0,r=1/0){return t=this.sanitize(t),this.symbols.minusSign&&t.startsWith(this.symbols.minusSign)&&e<0?t=t.slice(this.symbols.minusSign.length):this.symbols.plusSign&&t.startsWith(this.symbols.plusSign)&&r>0&&(t=t.slice(this.symbols.plusSign.length)),this.symbols.group&&t.startsWith(this.symbols.group)||this.symbols.decimal&&t.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(t=D(t,this.symbols.group,"")),t=t.replace(this.symbols.numeral,""),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,"")),t.length===0)}constructor(t,e={}){this.locale=t,e.roundingIncrement!==1&&e.roundingIncrement!=null&&(e.maximumFractionDigits==null&&e.minimumFractionDigits==null?(e.maximumFractionDigits=0,e.minimumFractionDigits=0):e.maximumFractionDigits==null?e.maximumFractionDigits=e.minimumFractionDigits:e.minimumFractionDigits==null&&(e.minimumFractionDigits=e.maximumFractionDigits)),this.formatter=new Intl.NumberFormat(t,e),this.options=this.formatter.resolvedOptions(),this.symbols=Ue(t,this.formatter,this.options,e);var r,a;this.options.style==="percent"&&(((r=this.options.minimumFractionDigits)!==null&&r!==void 0?r:0)>18||((a=this.options.maximumFractionDigits)!==null&&a!==void 0?a:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const j=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),ze=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function Ue(s,t,e,r){var a,o,p,c;let S=new Intl.NumberFormat(s,{...e,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),l=S.formatToParts(-10000.111),v=S.formatToParts(10000.111),u=ze.map(n=>S.formatToParts(n));var $;let x=($=(a=l.find(n=>n.type==="minusSign"))===null||a===void 0?void 0:a.value)!==null&&$!==void 0?$:"-",b=(o=v.find(n=>n.type==="plusSign"))===null||o===void 0?void 0:o.value;!b&&(r?.signDisplay==="exceptZero"||r?.signDisplay==="always")&&(b="+");let h=(p=new Intl.NumberFormat(s,{...e,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(n=>n.type==="decimal"))===null||p===void 0?void 0:p.value,d=(c=l.find(n=>n.type==="group"))===null||c===void 0?void 0:c.value,w=l.filter(n=>!j.has(n.type)).map(n=>W(n.value)),A=u.flatMap(n=>n.filter(f=>!j.has(f.type)).map(f=>W(f.value))),E=[...new Set([...w,...A])].sort((n,f)=>f.length-n.length),N=E.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${E.join("|")}|[\\p{White_Space}]`,"gu"),P=[...new Intl.NumberFormat(e.locale,{useGrouping:!1}).format(9876543210)].reverse(),F=new Map(P.map((n,f)=>[n,f])),T=new RegExp(`[${P.join("")}]`,"g");return{minusSign:x,plusSign:b,decimal:h,group:d,literals:N,numeral:T,index:n=>String(F.get(n))}}function D(s,t,e){return s.replaceAll?s.replaceAll(t,e):s.split(t).join(e)}function W(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var H={};H={Empty:"فارغ"};var O={};O={Empty:"Изпразни"};var Y={};Y={Empty:"Prázdné"};var Z={};Z={Empty:"Tom"};var J={};J={Empty:"Leer"};var X={};X={Empty:"Άδειο"};var Q={};Q={Empty:"Empty"};var ee={};ee={Empty:"Vacío"};var te={};te={Empty:"Tühjenda"};var re={};re={Empty:"Tyhjä"};var ie={};ie={Empty:"Vide"};var se={};se={Empty:"ריק"};var ne={};ne={Empty:"Prazno"};var ae={};ae={Empty:"Üres"};var oe={};oe={Empty:"Vuoto"};var le={};le={Empty:"空"};var ue={};ue={Empty:"비어 있음"};var ce={};ce={Empty:"Tuščias"};var me={};me={Empty:"Tukšs"};var de={};de={Empty:"Tom"};var pe={};pe={Empty:"Leeg"};var fe={};fe={Empty:"Pusty"};var $e={};$e={Empty:"Vazio"};var be={};be={Empty:"Vazio"};var ye={};ye={Empty:"Gol"};var he={};he={Empty:"Не заполнено"};var ge={};ge={Empty:"Prázdne"};var ve={};ve={Empty:"Prazen"};var xe={};xe={Empty:"Prazno"};var Ee={};Ee={Empty:"Tomt"};var Pe={};Pe={Empty:"Boş"};var De={};De={Empty:"Пусто"};var Se={};Se={Empty:"空"};var we={};we={Empty:"空白"};var Ne={};Ne={"ar-AE":H,"bg-BG":O,"cs-CZ":Y,"da-DK":Z,"de-DE":J,"el-GR":X,"en-US":Q,"es-ES":ee,"et-EE":te,"fi-FI":re,"fr-FR":ie,"he-IL":se,"hr-HR":ne,"hu-HU":ae,"it-IT":oe,"ja-JP":le,"ko-KR":ue,"lt-LT":ce,"lv-LV":me,"nb-NO":de,"nl-NL":pe,"pl-PL":fe,"pt-BR":$e,"pt-PT":be,"ro-RO":ye,"ru-RU":he,"sk-SK":ge,"sl-SI":ve,"sr-SP":xe,"sv-SE":Ee,"tr-TR":Pe,"uk-UA":De,"zh-CN":Se,"zh-TW":we};function _e(s){return s&&s.__esModule?s.default:s}const q=()=>{};function Oe(s){const t=m.useRef(void 0);let{value:e,textValue:r,minValue:a,maxValue:o,isDisabled:p,isReadOnly:c,isRequired:S,onIncrement:l,onIncrementPage:v,onDecrement:u,onDecrementPage:$,onDecrementToMin:x,onIncrementToMax:b}=s;const z=Be(_e(Ne),"@react-aria/spinbutton");let h=m.useRef(!1);const d=m.useCallback(()=>{clearTimeout(t.current),h.current=!1},[]),w=g(()=>{d()});m.useEffect(()=>()=>w(),[]);let A=i=>{if(!(i.ctrlKey||i.metaKey||i.shiftKey||i.altKey||c||i.nativeEvent.isComposing))switch(i.key){case"PageUp":if(v){i.preventDefault(),v?.();break}case"ArrowUp":case"Up":l&&(i.preventDefault(),l?.());break;case"PageDown":if($){i.preventDefault(),$?.();break}case"ArrowDown":case"Down":u&&(i.preventDefault(),u?.());break;case"Home":x&&(i.preventDefault(),x?.());break;case"End":b&&(i.preventDefault(),b?.());break}},E=m.useRef(!1),N=()=>{E.current=!0},P=()=>{E.current=!1},F=r===""?z.format("Empty"):(r||`${e}`).replace("-","−");m.useEffect(()=>{E.current&&(Re("assertive"),Ae(F,"assertive"))},[F]);let T=m.useCallback(()=>{d()},[d]);const U=g(l??q),n=g(u??q),f=g(()=>{(o===void 0||isNaN(o)||e===void 0||isNaN(e)||e<o)&&(U(),V(60))}),V=g(i=>{w(),h.current=!0,t.current=window.setTimeout(f,i)}),Fe=g(()=>{(a===void 0||isNaN(a)||e===void 0||isNaN(e)||e>a)&&(n(),B(60))}),B=g(i=>{w(),h.current=!0,t.current=window.setTimeout(Fe,i)});let Te=i=>{i.preventDefault()},{addGlobalListener:C,removeAllGlobalListeners:_}=Ve(),y=m.useRef(!1),[L,I]=m.useState(null);m.useEffect(()=>{L==="touch"?V(600):L&&V(400)},[L]);let[M,R]=m.useState(null);return m.useEffect(()=>{M==="touch"?B(600):M&&B(400)},[M]),{spinButtonProps:{role:"spinbutton","aria-valuenow":e!==void 0&&!isNaN(e)?e:void 0,"aria-valuetext":F,"aria-valuemin":a,"aria-valuemax":o,"aria-disabled":p||void 0,"aria-readonly":c||void 0,"aria-required":S||void 0,onKeyDown:A,onFocus:N,onBlur:P},incrementButtonProps:{onPressStart:i=>{d(),i.pointerType!=="touch"?(l?.(),I("mouse")):(C(window,"pointercancel",T,{capture:!0}),y.current=!1,I("touch")),C(window,"contextmenu",Te)},onPressUp:i=>{d(),i.pointerType==="touch"&&(y.current=!0),_(),I(null)},onPressEnd:i=>{d(),i.pointerType==="touch"&&!h.current&&y.current&&l?.(),y.current=!1,I(null)},onFocus:N,onBlur:P},decrementButtonProps:{onPressStart:i=>{d(),i.pointerType!=="touch"?(u?.(),R("mouse")):(C(window,"pointercancel",T,{capture:!0}),y.current=!1,R("touch"))},onPressUp:i=>{d(),i.pointerType==="touch"&&(y.current=!0),_(),R(null)},onPressEnd:i=>{d(),i.pointerType==="touch"&&!h.current&&y.current&&u?.(),y.current=!1,R(null)},onFocus:N,onBlur:P}}}export{Oe as $,Me as a};
