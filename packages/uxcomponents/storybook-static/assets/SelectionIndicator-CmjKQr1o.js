import{n as I,m as F,f as V,c as k,b as B}from"./index-BhyzFoYa.js";import{r as v}from"./index-D7ediGj1.js";import{r as o,R as b}from"./iframe-D6Fs4So_.js";const S=o.createContext(null);function j($){let i=o.useRef({});return b.createElement(S.Provider,{value:i},$.children)}const M=o.forwardRef(function(i,n){let{name:a,isVisible:r=!0,children:y,className:E,style:R,render:C,...P}=i,[d,l]=o.useState(r?"visible":"hidden"),p=o.useContext(S);if(!p)throw new Error("<SharedElement> must be rendered inside a <SharedElementTransition>");r&&d==="hidden"&&l("visible"),n=I(n),F(()=>{let e=n.current,u=p.current,m=u[a],c=null;if(e&&r&&m){l("visible");let s=e.getAnimations(),x=m.style.map(([t,h])=>{let w=e.style[t];if(t==="translate"){let g=m.rect,f=e.getBoundingClientRect(),N=g.left-f?.left,q=g.top-f?.top;e.style.translate=`${N}px ${q}px`}else e.style[t]=h;return[t,w]});for(let t of e.getAnimations())s.includes(t)||t.cancel();c=requestAnimationFrame(()=>{c=null;for(let[t,h]of x)e.style[t]=h}),delete u[a]}else e&&r&&!m?(queueMicrotask(()=>v.flushSync(()=>l("entering"))),c=requestAnimationFrame(()=>{c=null,l("visible")})):e&&!r&&queueMicrotask(()=>{u[a]?(delete u[a],v.flushSync(()=>l("exiting")),Promise.all(e.getAnimations().map(s=>s.finished)).then(()=>l("hidden")).catch(()=>{})):l("hidden")});return()=>{if(c!=null&&cancelAnimationFrame(c),e&&e.isConnected&&!e.hasAttribute("data-exiting")){let s=window.getComputedStyle(e);if(s.transitionProperty!=="none"){let x=s.transitionProperty.split(/\s*,\s*/);u[a]={rect:e.getBoundingClientRect(),style:x.map(t=>[t,s[t]])}}}}},[n,p,a,r]);let A=V({children:y,className:E,style:R,render:C,values:{isEntering:d==="entering",isExiting:d==="exiting"}});return d==="hidden"?null:b.createElement(k.div,{...P,...A,ref:n,"data-entering":d==="entering"||void 0,"data-exiting":d==="exiting"||void 0})}),D=o.createContext({isSelected:!1}),z=o.forwardRef(function(i,n){[i,n]=B(i,n,D);let{isSelected:a,...r}=i;return b.createElement(M,{...r,ref:n,className:i.className||"react-aria-SelectionIndicator",name:"SelectionIndicator",isVisible:a})});export{D as $,j as a,z as b};
