import{a as w,i as G,d as C,r as j,$ as re,b as J,f as _,c as k,g as Q,n as X,q as ie,j as de}from"./index-BhyzFoYa.js";import{$ as R,b as ne}from"./Collection-Bt7Y5DmF.js";import{$ as H,a as se,b as Y,c as ce,d as ue}from"./DragAndDrop-rueDnB-i.js";import{$ as fe,b as $e}from"./Header-D9CFOVpE.js";import{e as be}from"./RSPContexts-87WB4FFh.js";import{a as ve,$ as pe}from"./SelectionIndicator-CmjKQr1o.js";import{a as ge}from"./Separator-CJiA6l5c.js";import{$ as me}from"./Text-DDv73jtL.js";import{$ as xe,a as he,b as Z,f as Pe,d as De,e as Se,h as ye}from"./CollectionBuilder-a_G0Hq2G.js";import{$ as Ee}from"./inertValue-OyoLkesd.js";import{r as s,R as d}from"./iframe-D6Fs4So_.js";import{b as Me,a as Be}from"./useListState-BSWCo6IK.js";import{$ as Ce}from"./context-TYPMPinS.js";import{$ as Fe}from"./useCollator-iKZLII7H.js";import{$ as ke}from"./ListKeyboardDelegate-q2bQsZ56.js";import{b as we,v as Le,u as Ie,g as ee,s as q,o as _e,f as Ae,c as Ue}from"./useFocusRing-D9TQlOey.js";import{$ as Ve}from"./useLabel-BvROEfP_.js";import{$ as Oe}from"./useSelectableList-Df_lTvxt.js";import{k as Te}from"./SelectionManager-Ildo9Xoe.js";import{a as He}from"./FocusScope-CgNthz1u.js";const W=new WeakMap;function Ne(t){return typeof t=="string"?t.replace(/\s*/g,""):""+t}function ze(t,e){let l=W.get(t);if(!l)throw new Error("Unknown list");return`${l.id}-option-${Ne(e)}`}function Re(t,e,l){let o=w(t,{labelable:!0}),r=t.selectionBehavior||"toggle",i=t.linkBehavior||(r==="replace"?"action":"override");r==="toggle"&&i==="action"&&(i="override");let{listProps:a}=Oe({...t,ref:l,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,linkBehavior:i}),{focusWithinProps:n}=we({onFocusWithin:t.onFocus,onBlurWithin:t.onBlur,onFocusWithinChange:t.onFocusChange}),c=G(t.id);W.set(e,{id:c,shouldUseVirtualFocus:t.shouldUseVirtualFocus,shouldSelectOnPressUp:t.shouldSelectOnPressUp,shouldFocusOnHover:t.shouldFocusOnHover,isVirtualized:t.isVirtualized,onAction:t.onAction,linkBehavior:i,UNSTABLE_itemBehavior:t.UNSTABLE_itemBehavior});let{labelProps:f,fieldProps:b}=Ve({...t,id:c,labelElementType:"span"});return{labelProps:f,listBoxProps:C(o,n,e.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...C(b,a)})}}function We(t,e,l){var o,r;let{key:i}=t,a=W.get(e);var n;let c=(n=t.isDisabled)!==null&&n!==void 0?n:e.selectionManager.isDisabled(i);var f;let b=(f=t.isSelected)!==null&&f!==void 0?f:e.selectionManager.isSelected(i);var p;let u=(p=t.shouldSelectOnPressUp)!==null&&p!==void 0?p:a?.shouldSelectOnPressUp;var x;let m=(x=t.shouldFocusOnHover)!==null&&x!==void 0?x:a?.shouldFocusOnHover;var P;let D=(P=t.shouldUseVirtualFocus)!==null&&P!==void 0?P:a?.shouldUseVirtualFocus;var v;let y=(v=t.isVirtualized)!==null&&v!==void 0?v:a?.isVirtualized,E=j(),M=j(),g={role:"option","aria-disabled":c||void 0,"aria-selected":e.selectionManager.selectionMode!=="none"?b:void 0};Le()&&Ie()||(g["aria-label"]=t["aria-label"],g["aria-labelledby"]=E,g["aria-describedby"]=M);let $=e.collection.getItem(i);if(y){let S=Number($?.index);g["aria-posinset"]=Number.isNaN(S)?void 0:S+1,g["aria-setsize"]=fe(e.collection)}let h=a?.onAction?()=>{var S;return a==null||(S=a.onAction)===null||S===void 0?void 0:S.call(a,i)}:void 0,B=ze(e,i),{itemProps:L,isPressed:U,isFocused:I,hasAction:N,allowsSelection:V}=Te({selectionManager:e.selectionManager,key:i,ref:l,shouldSelectOnPressUp:u,allowsDifferentPressOrigin:u&&m,isVirtualized:y,shouldUseVirtualFocus:D,isDisabled:c,onAction:h||!($==null||(o=$.props)===null||o===void 0)&&o.onAction?re($==null||(r=$.props)===null||r===void 0?void 0:r.onAction,h):void 0,linkBehavior:a?.linkBehavior,UNSTABLE_itemBehavior:a?.UNSTABLE_itemBehavior,id:B}),{hoverProps:O}=ee({isDisabled:c||!m,onHoverStart(){q()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(i))}}),F=w($?.props);delete F.id;let T=_e($?.props);return{optionProps:{...g,...C(F,L,O,T),id:B},labelProps:{id:E},descriptionProps:{id:M},isFocused:I,isFocusVisible:I&&e.selectionManager.isFocused&&q(),isSelected:b,isDisabled:c,isPressed:U,allowsSelection:V,hasAction:N}}function Ke(t){let{heading:e,"aria-label":l}=t,o=G();return{itemProps:{role:"presentation"},headingProps:e?{id:o,role:"presentation",onMouseDown:r=>{r.preventDefault()}}:{},groupProps:{role:"group","aria-label":l,"aria-labelledby":e?o:void 0}}}const oe=s.createContext(null),A=s.createContext(null),go=s.forwardRef(function(e,l){[e,l]=J(e,l,oe);let o=s.useContext(A);return o?d.createElement(te,{state:o,props:e,listBoxRef:l}):d.createElement(xe,{content:d.createElement(he,e)},r=>d.createElement(je,{props:e,listBoxRef:l,collection:r}))});function je({props:t,listBoxRef:e,collection:l}){t={...t,collection:l,children:null,items:null};let{layoutDelegate:o}=s.useContext(R),r=Be({...t,layoutDelegate:o});return d.createElement(te,{state:r,props:t,listBoxRef:e})}function te({state:t,props:e,listBoxRef:l}){[e,l]=J(e,l,be);let{dragAndDropHooks:o,layout:r="stack",orientation:i="vertical",filter:a}=e,n=Me(t,a),{collection:c,selectionManager:f}=n,b=!!o?.useDraggableCollectionState,p=!!o?.useDroppableCollectionState,{direction:u}=Ce(),{disabledBehavior:x,disabledKeys:m}=f,P=Fe({usage:"search",sensitivity:"base"}),{isVirtualized:D,layoutDelegate:v,dropTargetDelegate:y,CollectionRoot:E}=s.useContext(R),M=s.useMemo(()=>e.keyboardDelegate||new ke({collection:c,collator:P,ref:l,disabledKeys:m,disabledBehavior:x,layout:r,orientation:i,direction:u,layoutDelegate:v}),[c,P,l,x,m,i,u,e.keyboardDelegate,r,v]),{listBoxProps:g}=Re({...e,shouldSelectOnPressUp:b||e.shouldSelectOnPressUp,keyboardDelegate:M,isVirtualized:D},n,l);s.useRef(b),s.useRef(p),s.useEffect(()=>{},[b,p]);let $,h,B,L=!1,U=null,I=s.useRef(null);if(b&&o){$=o.useDraggableCollectionState({collection:c,selectionManager:f,preview:o.renderDragPreview?I:void 0}),o.useDraggableCollection({},$,l);let z=o.DragPreview;U=o.renderDragPreview?d.createElement(z,{ref:I},o.renderDragPreview):null}if(p&&o){h=o.useDroppableCollectionState({collection:c,selectionManager:f});let z=o.dropTargetDelegate||y||new o.ListDropTargetDelegate(c,l,{orientation:i,layout:r,direction:u});B=o.useDroppableCollection({keyboardDelegate:M,dropTargetDelegate:z},h,l),L=h.isDropTarget({type:"root"})}let{focusProps:N,isFocused:V,isFocusVisible:O}=Ae(),F=n.collection.size===0,T={isDropTarget:L,isEmpty:F,isFocused:V,isFocusVisible:O,layout:e.layout||"stack",state:n},S=_({...e,children:void 0,defaultClassName:"react-aria-ListBox",values:T}),K=null;F&&e.renderEmptyState&&(K=d.createElement("div",{role:"option",style:{display:"contents"}},e.renderEmptyState(T)));let le=w(e,{global:!0});return d.createElement(He,null,d.createElement(k.div,{...C(le,S,g,N,B?.collectionProps),ref:l,slot:e.slot||void 0,onScroll:e.onScroll,"data-drop-target":L||void 0,"data-empty":F||void 0,"data-focused":V||void 0,"data-focus-visible":O||void 0,"data-layout":e.layout||"stack","data-orientation":e.orientation||"vertical"},d.createElement(Q,{values:[[oe,e],[A,n],[H,{dragAndDropHooks:o,dragState:$,dropState:h}],[ge,{elementType:"div"}],[se,{render:qe}],[ne,{name:"ListBoxSection",render:ae}]]},d.createElement(ve,null,d.createElement(E,{collection:c,scrollRef:l,persistedKeys:ce(f,o,h),renderDropIndicator:Y(o,h)}))),K,U))}function ae(t,e,l,o="react-aria-ListBoxSection"){let r=s.useContext(A),{dragAndDropHooks:i,dropState:a}=s.useContext(H),{CollectionBranch:n}=s.useContext(R),[c,f]=de();var b;let{headingProps:p,groupProps:u}=Ke({heading:f,"aria-label":(b=t["aria-label"])!==null&&b!==void 0?b:void 0}),x=_({...t,id:void 0,children:void 0,defaultClassName:o,values:void 0}),m=w(t,{global:!0});return delete m.id,d.createElement(k.section,{...C(m,x,u),ref:e},d.createElement($e.Provider,{value:{...p,ref:c}},d.createElement(n,{collection:r.collection,parent:l,renderDropIndicator:Y(i,a)})))}const mo=De(Se,ae),xo=Z(Pe,function(e,l,o){let r=X(l),i=s.useContext(A),{dragAndDropHooks:a,dragState:n,dropState:c}=s.useContext(H),{optionProps:f,labelProps:b,descriptionProps:p,...u}=We({key:o.key,"aria-label":e?.["aria-label"]},i,r),{hoverProps:x,isHovered:m}=ee({isDisabled:!u.allowsSelection&&!u.hasAction,onHoverStart:o.props.onHoverStart,onHoverChange:o.props.onHoverChange,onHoverEnd:o.props.onHoverEnd}),{focusProps:P}=Ue(e),D=null;n&&a&&(D=a.useDraggableItem({key:o.key,hasAction:u.hasAction},n));let v=null;c&&a&&(v=a.useDroppableItem({target:{type:"item",key:o.key,dropPosition:"on"}},c,r));let y=n&&n.isDragging(o.key),E=_({...e,id:void 0,children:e.children,defaultClassName:"react-aria-ListBoxItem",values:{...u,isHovered:m,selectionMode:i.selectionManager.selectionMode,selectionBehavior:i.selectionManager.selectionBehavior,allowsDragging:!!n,isDragging:y,isDropTarget:v?.isDropTarget}});s.useEffect(()=>{o.textValue},[o.textValue]);let M=e.href?k.a:k.div,g=w(e,{global:!0});return delete g.id,delete g.onClick,e.href&&f.tabIndex==null&&(f.tabIndex=-1),d.createElement(M,{...C(g,E,f,x,P,D?.dragProps,v?.dropProps),ref:r,"data-allows-dragging":!!n||void 0,"data-selected":u.isSelected||void 0,"data-disabled":u.isDisabled||void 0,"data-hovered":m||void 0,"data-focused":u.isFocused||void 0,"data-focus-visible":u.isFocusVisible||void 0,"data-pressed":u.isPressed||void 0,"data-dragging":y||void 0,"data-drop-target":v?.isDropTarget||void 0,"data-selection-mode":i.selectionManager.selectionMode==="none"?void 0:i.selectionManager.selectionMode},d.createElement(Q,{values:[[me,{slots:{[ie]:b,label:b,description:p}}],[pe,{isSelected:u.isSelected}]]},E.children))});function qe(t,e){e=X(e);let{dragAndDropHooks:l,dropState:o}=s.useContext(H),{dropIndicatorProps:r,isHidden:i,isDropTarget:a}=l.useDropIndicator(t,o,e);return i?null:d.createElement(Je,{...t,dropIndicatorProps:r,isDropTarget:a,ref:e})}function Ge(t,e){let{dropIndicatorProps:l,isDropTarget:o,...r}=t,i=_({...r,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:o}});return d.createElement(k.div,{...l,...i,role:"option",ref:e,"data-drop-target":o||void 0})}const Je=s.forwardRef(Ge);Z(ye,function(e,l,o){let r=s.useContext(A),{isLoading:i,onLoadMore:a,scrollOffset:n,...c}=e,f=s.useRef(null),b=s.useMemo(()=>({onLoadMore:a,collection:r?.collection,sentinelRef:f,scrollOffset:n}),[a,n,r?.collection]);ue(b,f);let p=_({...c,id:void 0,children:o.rendered,defaultClassName:"react-aria-ListBoxLoadingIndicator",values:void 0}),u={tabIndex:-1};return d.createElement(d.Fragment,null,d.createElement("div",{style:{position:"relative",width:0,height:0},inert:Ee(!0)},d.createElement("div",{"data-testid":"loadMoreSentinel",ref:f,style:{position:"absolute",height:1,width:1}})),i&&p.children&&d.createElement(k.div,{...C(w(e,{global:!0}),u),...p,role:"option",ref:l},p.children))});export{go as $,xo as a,W as b,ze as c,oe as d,A as e,mo as f};
